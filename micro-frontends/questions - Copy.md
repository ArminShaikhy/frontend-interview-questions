### 1. چگونه یک معماری میکروفرانت‌اند برای یک برنامه بزرگ React که بین چندین تیم تقسیم شده طراحی می‌کنید؟

**پاسخ:**

من با تقسیم برنامه بر اساس **مرزهای دامنه** (مثل احراز هویت، داشبورد، پرداخت) شروع می‌کنم و مالکیت را به هر تیم اختصاص می‌دهم. هر تیم میکروفرانت‌اند (MFE) خود را به‌صورت مستقل می‌سازد، که اغلب به‌صورت جداگانه مستقر می‌شود.

**رویکردها:**

- **فدراسیون ماژول (Webpack 5)** برای ادغام در زمان اجرا.
- **Single-SPA** برای مسیریابی و هماهنگی.
- **آی‌فریم‌ها** (به‌ندرت، برای جداسازی قدیمی).

**مثال (فدراسیون ماژول):**

```jsx
// هاست (پوسته برنامه)
import('پرداخت/برنامه_پرداخت');

// تنظیمات webpack برای پرداخت
new ModuleFederationPlugin({
  name: 'پرداخت',
  filename: 'remoteEntry.js',
  exposes: {
    './برنامه_پرداخت': './src/برنامه_پرداخت',
  },
});



2. رویکرد شما برای مدیریت وابستگی‌های مشترک در اکوسیستم میکروفرانت‌اند React چیست؟
پاسخ:
استفاده از تنظیمات shared فدراسیون ماژول Webpack برای جلوگیری از تکرار:
shared: {
  react: { singleton: true, requiredVersion: '^18.0.0' },
  'react-dom': { singleton: true },
}

ملاحظات کلیدی:

تثبیت نسخه‌ها در سراسر مخازن (از طریق .npmrc یا یک package.json پایه مشترک).
استفاده از peerDependencies هنگام بسته‌بندی کامپوننت‌ها.
هم‌راستا کردن رزولوشن وابستگی‌ها در طول CI برای شناسایی زودهنگام تعارض‌ها.



3. چگونه اشتراک حالت بین میکروفرانت‌اندها در یک برنامه React را مدیریت می‌کنید؟
پاسخ:بر اساس نیازهای جداسازی، یکی از موارد زیر را استفاده می‌کنم:

باس رویداد جهانی (مثل window.dispatchEvent) برای جفت‌سازی شل.
مخزن حالت مشترک (مثل zustand، redux یا valtio) که از طریق فدراسیون ماژول ارائه می‌شود:

// هاست از فروشگاه ریموت استفاده می‌کند
import useCartStore from 'سبد_خرید/فروشگاه';


سرویس pub/sub سفارشی یا RxJS برای ارتباط بین‌برنامه‌ای.

حالت مشترک را حداقل نگه می‌دارم تا استقلال MFE حفظ شود.


4. استراتژی شما برای مسیریابی در یک برنامه میکروفرانت‌اند React چیست؟
پاسخ:دو استراتژی رایج:

Single-SPA یا مسیریاب سطح هاست که مالکیت مسیر را به MFEها واگذار می‌کند:

<Route path="/پرداخت/*" element={<برنامه_پرداخت />} />


مسیریاب‌های مستقل درون MFEها که تحت مسیرهای پایه خاص مونت می‌شوند:

<BrowserRouter basename="/پرداخت">...</BrowserRouter>

استفاده از پیشوندهای URL و ساختار مسیر یکنواخت برای جلوگیری از برخوردها.


5. چگونه یکنواختی رابط کاربری/تجربه کاربری را در میکروفرانت‌اندهای ساخته‌شده توسط تیم‌های مختلف تضمین می‌کنید؟
پاسخ:

ساخت و نگهداری یک سیستم طراحی به‌عنوان بسته مشترک (Storybook + npm).
اعمال قوانین لینتینگ، تم‌سازی، فاصله‌گذاری و پاسخ‌گویی از طریق CI.
استفاده از CSS-in-JS یا CSS Modules برای جلوگیری از نشت استایل.

اختیاری: اعمال تم‌سازی در زمان اجرا یا توکن‌های طراحی برای یکپارچگی برند.


6. رویکرد شما برای تست پایان‌به‌پایان یک برنامه میکروفرانت‌اند React چیست؟
پاسخ:

هر MFE باید تست‌های واحد + یکپارچگی داشته باشد (Jest، RTL).
برای E2E، از ابزارهایی مثل Cypress یا Playwright در برابر پوسته یکپارچه استفاده کنید.
ماک APIها از طریق MSW یا محیط‌های تست بک‌اند.
اجرای تست‌ها به‌صورت موازی برای هر MFE در CI برای کاهش زمان ساخت.



7. چگونه میکروفرانت‌اندها را در یک خط لوله CI/CD برای یک پروژه React مستقر می‌کنید؟
پاسخ:

هر MFE به‌صورت مستقل، اغلب به CDN یا S3 مستقر می‌شود.
ارائه MFEها از طریق یک remoteEntry.js (فدراسیون ماژول).
مراحل CI/CD:
لینت، تست، ساخت
آپلود آرتیفکت‌ها (مثل به S3)
به‌روزرسانی مانیفست یا پیکربندی هاست



استفاده از نسخه‌بندی معنایی و ریموت‌های خاص محیط برای پشتیبانی از تست چندمحیطی.


8. فرآیند شما برای اشکال‌زدایی یک برنامه میکروفرانت‌اند React وقتی مشکلات چندین ماژول را در بر می‌گیرند چیست؟
پاسخ:

بازتولید مشکل در یک محیط توسعه یکپارچه.
بررسی کنسول/شبکه مرورگر برای remoteEntry.js گم‌شده یا نادرست.
استفاده از نقشه‌های منبع و لاگ‌های هاست برای ردیابی.
افزودن تگ‌های نسخه به هر MFE در طول ساخت.
استفاده از واردات دینامیک با لاگ‌گیری برای تأیید رفتار بارگذاری.

افزودن پرچم‌های ویژگی برای غیرفعال کردن انتخابی MFEها برای جداسازی سریع‌تر.


9. چگونه بهینه‌سازی عملکرد را در یک معماری میکروفرانت‌اند مدیریت می‌کنید؟
پاسخ:

استفاده از تقسیم کد درون هر MFE.
بهره‌برداری از حذف کد غیرضروری و کتابخانه‌های مشترک برای کاهش حجم باندل.
فعال‌سازی HTTP/2 یا پیش‌بارگذاری برای تکه‌های ریموت.
بارگذاری تنبل MFEها:

const CheckoutApp = React.lazy(() => import('پرداخت/برنامه_پرداخت'));


کش remoteEntry.js با سربرگ‌های طولانی‌مدت و نسخه‌بندی برای شکستن کش.



10. چگونه یک تیم را برای پذیرش رویکرد میکروفرانت‌اند در یک کدبیس React آماده می‌کنید؟
پاسخ:

ارائه مستندات معماری و نمودارهای سطح بالا.
راه‌اندازی مخازن قالب با ابزارها (مثل فدراسیون ماژول، تست).
برگزاری جلسات آماده‌سازی و راهنمایی‌ها.
معرفی یک پورتال توسعه‌دهنده برای کشف ریموت‌ها، ماژول‌های مشترک و استفاده از سیستم طراحی.
برنامه‌نویسی جفتی + بررسی‌های کد متمرکز بر مرزها و APIهای مبتنی بر قرارداد.

APIهای داخلی را ساده و مبتنی بر رابط نگه می‌دارم تا جفت‌سازی تنگاتنگ به حداقل برسد.```
